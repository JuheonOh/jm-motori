<!doctype html>
<html lang="ko" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JM MOTORI | 광주 BMW & MINI 전문 정비</title>
    <meta
      name="description"
      content="광주 광산구 BMW·MINI 전문 정비소 JM MOTORI 공식 랜딩 페이지. 실제 정비소 현장 이미지와 네이버 블로그 최신 정비 사례를 한 번에 확인하세요."
    />
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio,line-clamp"></script>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&display=swap"
    />
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              primary: "#FFC107",
              charcoal: "#212529",
              panel: "#15181b",
            },
            fontFamily: {
              sans: ["Noto Sans KR", "sans-serif"],
            },
            boxShadow: {
              glow: "0 0 28px rgba(255, 193, 7, 0.25)",
            },
          },
        },
      };
    </script>
    <style type="text/tailwindcss">
      @layer base {
        html {
          scroll-behavior: smooth;
        }

        body {
          @apply bg-charcoal text-slate-100 antialiased;
        }
      }

      .sign-logo {
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }

      .hero-mask {
        background: linear-gradient(105deg, rgba(0, 0, 0, 0.86) 20%, rgba(0, 0, 0, 0.45) 55%, rgba(0, 0, 0, 0.72) 100%);
      }

      .grid-pattern {
        background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
          linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
        background-size: 18px 18px;
      }

      .blog-card:hover .blog-thumb {
        transform: scale(1.04);
      }
    </style>
  </head>
  <body>
    <nav class="fixed inset-x-0 top-0 z-50 border-b border-white/10 bg-black/65 backdrop-blur">
      <div class="mx-auto flex h-20 w-full max-w-7xl items-center justify-between px-4 sm:px-6">
        <a href="#home" class="leading-none">
          <p class="sign-logo text-[1.8rem] font-black tracking-tight">
            <span class="text-primary">JM</span>
            <span class="text-white">MOTORI</span>
          </p>
          <p class="text-[0.62rem] font-bold uppercase tracking-[0.28em] text-slate-400">BMW & MINI Specialist</p>
        </a>

        <div class="hidden items-center gap-7 text-sm font-semibold text-slate-300 md:flex">
          <a href="#services" class="transition hover:text-primary">정비 서비스</a>
          <a href="#portfolio" class="transition hover:text-primary">정비 포트폴리오</a>
          <a href="#contact" class="transition hover:text-primary">오시는 길</a>
          <a
            href="tel:010-4195-7485"
            class="rounded-md bg-primary px-4 py-2 font-extrabold text-black shadow-glow transition hover:brightness-95"
            >전화 상담</a
          >
        </div>
      </div>
    </nav>

    <main id="home" class="relative">
      <header class="relative min-h-screen overflow-hidden">
        <img src="2.jpg" alt="JM MOTORI 정비 현장" class="absolute inset-0 h-full w-full object-cover" />
        <div class="hero-mask absolute inset-0"></div>

        <div class="relative mx-auto flex min-h-screen w-full max-w-7xl items-center px-4 pt-24 sm:px-6">
          <div class="max-w-3xl">
            <p class="mb-5 inline-flex items-center rounded-full border border-primary/40 bg-primary/15 px-4 py-2 text-xs font-bold tracking-[0.18em] text-primary">
              GWANGJU BMW·MINI WORKSHOP
            </p>
            <h1 class="text-4xl font-black leading-tight sm:text-6xl lg:text-7xl">
              미니쿠퍼·BMW 전문,
              <span class="text-primary">정직하고 정확한 정비</span>
            </h1>
            <p class="mt-8 max-w-2xl text-base leading-relaxed text-slate-200 sm:text-lg">
              실제 매장 환경과 네이버 블로그의 최신 정비 사례를 실시간으로 연결해,
              방문 전에도 정비 퀄리티를 확인할 수 있도록 구성한 JM MOTORI 공식 SPA입니다.
            </p>

            <div class="mt-10 flex flex-col gap-4 sm:flex-row">
              <a
                href="tel:010-4195-7485"
                class="rounded-md bg-primary px-8 py-4 text-center text-lg font-extrabold text-black shadow-glow transition hover:-translate-y-0.5"
                >010-4195-7485 바로 전화</a
              >
              <a
                href="#portfolio"
                class="rounded-md border border-white/20 bg-white/5 px-8 py-4 text-center text-lg font-bold text-white transition hover:border-primary/60 hover:text-primary"
                >최신 정비 사례 보기</a
              >
            </div>
          </div>
        </div>
      </header>

      <section id="services" class="grid-pattern border-y border-white/10 bg-panel/60 px-4 py-20 sm:px-6">
        <div class="mx-auto w-full max-w-7xl">
          <div class="mb-12">
            <p class="text-xs font-bold uppercase tracking-[0.2em] text-primary">Core Services</p>
            <h2 class="mt-3 text-3xl font-black sm:text-4xl">BMW & MINI 전용 정비 서비스</h2>
          </div>

          <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
            <article class="rounded-xl border border-white/10 bg-black/40 p-6">
              <h3 class="text-lg font-bold text-primary">경정비·소모품</h3>
              <p class="mt-3 text-sm leading-relaxed text-slate-300">엔진오일, 브레이크 오일, 냉각수, 점화계통 등 주기 관리 중심 정비</p>
            </article>
            <article class="rounded-xl border border-white/10 bg-black/40 p-6">
              <h3 class="text-lg font-bold text-primary">미션·엔진 진단</h3>
              <p class="mt-3 text-sm leading-relaxed text-slate-300">전용 진단 장비 기반의 오류 코드 분석과 정밀 점검 리포트 제공</p>
            </article>
            <article class="rounded-xl border border-white/10 bg-black/40 p-6">
              <h3 class="text-lg font-bold text-primary">하체·브레이크</h3>
              <p class="mt-3 text-sm leading-relaxed text-slate-300">하체 소음, 제동 성능 저하, 얼라인먼트 이슈를 차량 상태에 맞춰 정비</p>
            </article>
            <article class="rounded-xl border border-white/10 bg-black/40 p-6">
              <h3 class="text-lg font-bold text-primary">전기·전자 수리</h3>
              <p class="mt-3 text-sm leading-relaxed text-slate-300">센서, 배터리, 경고등 점등 원인 추적 및 부품 교체/세팅 대응</p>
            </article>
          </div>
        </div>
      </section>

      <section id="portfolio" class="bg-slate-950 px-4 py-20 sm:px-6">
        <div class="mx-auto w-full max-w-7xl">
          <div class="mb-10 flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between">
            <div>
              <p class="text-xs font-bold uppercase tracking-[0.2em] text-primary">Live Portfolio</p>
              <h2 class="mt-3 text-3xl font-black sm:text-4xl">네이버 블로그 최신 정비 사례</h2>
              <p class="mt-3 text-sm text-slate-400">ablymotors RSS를 실시간 파싱해 최신 포스팅을 카드로 자동 노출합니다.</p>
            </div>
            <a
              href="https://blog.naver.com/ablymotors"
              target="_blank"
              rel="noopener noreferrer"
              class="text-sm font-bold text-primary hover:underline"
              >블로그 전체 보기</a
            >
          </div>

          <div id="blog-container" class="grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3">
            <div class="col-span-full rounded-xl border border-white/10 bg-panel p-10 text-center text-slate-400">
              최신 정비 사례를 불러오는 중입니다...
            </div>
          </div>
        </div>
      </section>

      <section id="contact" class="border-t border-white/10 bg-charcoal px-4 py-20 sm:px-6">
        <div class="mx-auto w-full max-w-7xl">
          <div class="mb-12 text-center">
            <p class="text-xs font-bold uppercase tracking-[0.2em] text-primary">Location & Contact</p>
            <h2 class="mt-3 text-3xl font-black sm:text-4xl">광주 광산구 JM MOTORI</h2>
          </div>

          <div class="grid gap-8 lg:grid-cols-[1.05fr_0.95fr]">
            <div class="space-y-6">
              <div class="grid gap-4 sm:grid-cols-3">
                <img src="1.jpg" alt="JM MOTORI 외관" class="h-40 w-full rounded-lg object-cover" />
                <img src="3.jpg" alt="JM MOTORI 매장 전경" class="h-40 w-full rounded-lg object-cover" />
                <img src="2.jpg" alt="JM MOTORI 정비 작업" class="h-40 w-full rounded-lg object-cover" />
              </div>

              <article class="rounded-xl border border-white/10 bg-panel p-7">
                <div class="flex items-center justify-between">
                  <h3 class="text-lg font-bold text-primary">매장 정보</h3>
                  <span
                    id="business-status"
                    class="rounded-full border border-emerald-400/40 bg-emerald-400/15 px-3 py-1 text-[11px] font-bold text-emerald-300"
                    >영업시간 확인 중</span
                  >
                </div>
                <dl class="mt-5 space-y-4 text-sm">
                  <div>
                    <dt class="mb-1 font-semibold text-slate-300">주소</dt>
                    <dd class="leading-relaxed text-slate-200">광주 광산구 사암로106번길 68 1층 (우산동 1073-1)</dd>
                  </div>
                  <div>
                    <dt class="mb-1 font-semibold text-slate-300">연락처</dt>
                    <dd><a href="tel:010-4195-7485" class="font-bold text-primary">010-4195-7485</a></dd>
                  </div>
                  <div>
                    <dt class="mb-1 font-semibold text-slate-300">영업시간</dt>
                    <dd class="text-slate-200">평일 08:30~18:30 / 토요일 09:00~15:00 / 일요일 휴무</dd>
                  </div>
                </dl>

                <div class="mt-7 grid gap-3 sm:grid-cols-3">
                  <button
                    type="button"
                    data-nav="tmap"
                    class="rounded-md bg-[#e31837] px-4 py-3 text-sm font-bold text-white transition hover:brightness-95"
                  >
                    T맵 길안내
                  </button>
                  <button
                    type="button"
                    data-nav="kakao"
                    class="rounded-md bg-[#fee500] px-4 py-3 text-sm font-bold text-[#191600] transition hover:brightness-95"
                  >
                    카카오내비
                  </button>
                  <a
                    href="https://map.naver.com/v5/search/%EA%B4%91%EC%A3%BC%20%EA%B4%91%EC%82%B0%EA%B5%AC%20%EC%82%AC%EC%95%94%EB%A1%9C106%EB%B2%88%EA%B8%B8%2068"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="rounded-md bg-[#03c75a] px-4 py-3 text-center text-sm font-bold text-white transition hover:brightness-95"
                  >
                    네이버지도
                  </a>
                </div>
              </article>
            </div>

            <div class="overflow-hidden rounded-xl border border-white/10 bg-panel">
              <div id="map" class="h-80 w-full bg-slate-800"></div>
              <div class="border-t border-white/10 p-5 text-xs leading-relaxed text-slate-400">
                네이버 지도 API 키가 설정되지 않은 경우 기본 임베드 지도로 표시됩니다.
                `window.NAVER_MAP_CLIENT_ID` 값을 지정하면 실제 위치 기반 네이버 지도가 활성화됩니다.
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="border-t border-white/10 bg-black px-4 py-7 text-center text-xs text-slate-500 sm:px-6">
      © <span id="year"></span> JM MOTORI. BMW & MINI Specialist in Gwangju.
    </footer>

    <script>
      const STORE = {
        name: "JM MOTORI",
        phone: "010-4195-7485",
        lat: 35.1568,
        lng: 126.8115,
      };

      function normalizeText(htmlText) {
        const parser = new DOMParser();
        const doc = parser.parseFromString(`<div>${htmlText}</div>`, "text/html");
        const text = doc.body.textContent || "";
        return text.replace(/\s+/g, " ").trim();
      }

      function escapeHTML(value) {
        return value
          .replaceAll("&", "&amp;")
          .replaceAll("<", "&lt;")
          .replaceAll(">", "&gt;")
          .replaceAll('"', "&quot;")
          .replaceAll("'", "&#39;");
      }

      function toSafeURL(url, fallback) {
        if (!url) return fallback;
        if (url.startsWith("http://") || url.startsWith("https://")) return url;
        if (url.startsWith("//")) return `https:${url}`;
        return fallback;
      }

      function extractThumbnail(htmlText) {
        const parser = new DOMParser();
        const doc = parser.parseFromString(`<div>${htmlText}</div>`, "text/html");
        const image = doc.querySelector("img");
        if (!image) {
          return "3.jpg";
        }

        const source = image.getAttribute("src") || "";
        return toSafeURL(source, "3.jpg");
      }

      async function fetchRSSPosts() {
        const RSS_URL = "https://rss.blog.naver.com/ablymotors.xml";
        const PROXY = `https://api.allorigins.win/get?url=${encodeURIComponent(RSS_URL)}`;
        const container = document.getElementById("blog-container");

        try {
          const response = await fetch(PROXY);
          if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
          }

          const data = await response.json();
          const parser = new DOMParser();
          const xml = parser.parseFromString(data.contents, "text/xml");
          const items = Array.from(xml.querySelectorAll("item")).slice(0, 6);

          if (items.length === 0) {
            throw new Error("No RSS items");
          }

          container.innerHTML = "";

          items.forEach((item) => {
            const titleRaw = item.querySelector("title")?.textContent?.trim() || "제목 없음";
            const linkRaw = item.querySelector("link")?.textContent?.trim() || "https://blog.naver.com/ablymotors";
            const pubDateRaw = item.querySelector("pubDate")?.textContent || "";
            const descriptionHTML = item.querySelector("description")?.textContent || "";

            const thumbnail = toSafeURL(extractThumbnail(descriptionHTML), "3.jpg");
            const summaryRaw = normalizeText(descriptionHTML);
            const summary = summaryRaw.length > 92 ? `${summaryRaw.slice(0, 92)}...` : summaryRaw;
            const title = escapeHTML(titleRaw);
            const summarySafe = escapeHTML(summary || "포스팅 미리보기가 준비되지 않았습니다.");
            const link = toSafeURL(linkRaw, "https://blog.naver.com/ablymotors");
            const pubDate = pubDateRaw
              ? new Date(pubDateRaw).toLocaleDateString("ko-KR", {
                  year: "numeric",
                  month: "2-digit",
                  day: "2-digit",
                })
              : "날짜 정보 없음";

            const card = document.createElement("article");
            card.className = "blog-card overflow-hidden rounded-xl border border-white/10 bg-panel shadow-lg transition hover:border-primary/50";
            card.innerHTML = `
              <a href="${link}" target="_blank" rel="noopener noreferrer" class="block h-full">
                <div class="aspect-[16/10] overflow-hidden bg-slate-800">
                  <img src="${thumbnail}" alt="${title}" class="blog-thumb h-full w-full object-cover transition duration-500" loading="lazy" />
                </div>
                <div class="p-5">
                  <div class="mb-3 flex items-center justify-between text-xs">
                    <span class="font-bold uppercase tracking-[0.16em] text-primary">Repair Diary</span>
                    <span class="text-slate-500">${pubDate}</span>
                  </div>
                  <h3 class="line-clamp-2 text-lg font-bold text-white">${title}</h3>
                  <p class="mt-3 line-clamp-3 text-sm leading-relaxed text-slate-400">${summarySafe}</p>
                  <p class="mt-5 text-sm font-bold text-primary">자세히 보기</p>
                </div>
              </a>
            `;

            container.appendChild(card);
          });
        } catch (error) {
          console.error("RSS 로드 실패", error);
          container.innerHTML = `
            <div class="col-span-full rounded-xl border border-red-300/30 bg-red-500/10 p-8 text-center text-sm text-red-200">
              최신 정비 사례를 자동으로 가져오지 못했습니다. 잠시 후 다시 시도하거나
              <a href="https://blog.naver.com/ablymotors" class="font-bold underline" target="_blank" rel="noopener noreferrer">네이버 블로그</a>에서 직접 확인해 주세요.
            </div>
          `;
        }
      }

      function initMapFallback() {
        const mapContainer = document.getElementById("map");
        mapContainer.innerHTML = `
          <iframe
            title="JM MOTORI 위치"
            src="https://www.google.com/maps?q=35.1568,126.8115&hl=ko&z=16&output=embed"
            width="100%"
            height="100%"
            style="border:0"
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
        `;
      }

      function initNaverMap() {
        const clientId = window.NAVER_MAP_CLIENT_ID;

        if (!clientId) {
          initMapFallback();
          return;
        }

        const script = document.createElement("script");
        script.src = `https://oapi.map.naver.com/openapi/v3/maps.js?ncpClientId=${clientId}`;
        script.async = true;
        script.onload = () => {
          if (!window.naver || !window.naver.maps) {
            initMapFallback();
            return;
          }

          const location = new naver.maps.LatLng(STORE.lat, STORE.lng);
          const map = new naver.maps.Map("map", {
            center: location,
            zoom: 17,
          });

          new naver.maps.Marker({
            position: location,
            map,
            title: STORE.name,
          });
        };
        script.onerror = initMapFallback;
        document.head.appendChild(script);
      }

      function updateBusinessStatus() {
        const badge = document.getElementById("business-status");
        if (!badge) return;

        const now = new Date();
        const kst = new Date(now.toLocaleString("en-US", { timeZone: "Asia/Seoul" }));
        const day = kst.getDay();
        const minutes = kst.getHours() * 60 + kst.getMinutes();
        const isWeekday = day >= 1 && day <= 5;
        const isSaturday = day === 6;
        const weekdayOpen = minutes >= 510 && minutes <= 1110;
        const saturdayOpen = minutes >= 540 && minutes <= 900;
        const openNow = (isWeekday && weekdayOpen) || (isSaturday && saturdayOpen);

        if (openNow) {
          badge.className =
            "rounded-full border border-emerald-400/40 bg-emerald-400/15 px-3 py-1 text-[11px] font-bold text-emerald-300";
          badge.textContent = "현재 영업 중";
          return;
        }

        badge.className =
          "rounded-full border border-rose-300/35 bg-rose-400/10 px-3 py-1 text-[11px] font-bold text-rose-200";
        badge.textContent = "영업시간 외";
      }

      function connectNavigationButtons() {
        const webFallback = `https://map.kakao.com/link/to/${encodeURIComponent(STORE.name)},${STORE.lat},${STORE.lng}`;
        const routes = {
          tmap: `tmap://route?goalname=${encodeURIComponent(STORE.name)}&goalx=${STORE.lng}&goaly=${STORE.lat}`,
          kakao: `kakaonavi://navigate?name=${encodeURIComponent(STORE.name)}&x=${STORE.lng}&y=${STORE.lat}`,
        };

        document.querySelectorAll("[data-nav]").forEach((button) => {
          button.addEventListener("click", () => {
            const provider = button.dataset.nav;
            const appLink = routes[provider];
            const startedAt = Date.now();

            window.location.href = appLink;

            setTimeout(() => {
              if (Date.now() - startedAt < 1600) {
                window.open(webFallback, "_blank", "noopener,noreferrer");
              }
            }, 1200);
          });
        });
      }

      document.addEventListener("DOMContentLoaded", () => {
        document.getElementById("year").textContent = new Date().getFullYear();
        fetchRSSPosts();
        initNaverMap();
        updateBusinessStatus();
        connectNavigationButtons();
      });
    </script>
  </body>
</html>
